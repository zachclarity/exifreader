<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="UTF-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>OCR Extract</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600&family=Outfit:wght@300;500;700&display=swap" rel="stylesheet"/>
  <script>
    tailwind.config={theme:{extend:{fontFamily:{display:['Outfit','sans-serif'],mono:['JetBrains Mono','monospace']},
    colors:{ink:{50:'#f5f5f0',100:'#e8e8df',200:'#d1d1bf',800:'#2a2a24',900:'#1a1a16',950:'#0d0d0b'},
    ember:{400:'#f97316',500:'#ea580c',600:'#c2410c'},jade:{400:'#34d399',500:'#10b981'}}}}};
  </script>
  <style>
    body{font-family:'Outfit',sans-serif}.mono{font-family:'JetBrains Mono',monospace}
    .drop-active{animation:pulse .9s ease-in-out infinite}
    @keyframes pulse{0%,100%{border-color:#ea580c;box-shadow:0 0 0 0 rgba(234,88,12,.3)}50%{border-color:#f97316;box-shadow:0 0 0 12px rgba(234,88,12,0)}}
    .reveal{animation:up .5s cubic-bezier(.22,1,.36,1) forwards;opacity:0;transform:translateY(24px)}
    @keyframes up{to{opacity:1;transform:translateY(0)}}
    .spinner{border:3px solid rgba(255,255,255,.15);border-top-color:#f97316;border-radius:50%;width:28px;height:28px;animation:spin .7s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    #rtxt::-webkit-scrollbar{width:6px}#rtxt::-webkit-scrollbar-thumb{background:#3a3a34;border-radius:3px}
  </style>
</head>
<body class="h-full bg-ink-950 text-ink-100 overflow-x-hidden">
<header class="sticky top-0 z-40 backdrop-blur-md bg-ink-950/70 border-b border-ink-800/60">
  <div class="max-w-5xl mx-auto flex items-center justify-between px-6 py-4">
    <div class="flex items-center gap-3">
      <div class="w-9 h-9 rounded-lg bg-gradient-to-br from-ember-400 to-ember-600 flex items-center justify-center text-white font-bold text-sm">O</div>
      <span class="text-lg font-display font-bold tracking-tight text-ink-50">OCR<span class="text-ember-400">Extract</span></span>
    </div>
    <span class="mono text-[11px] text-ink-200/50 hidden sm:block">LocalStack · Lambda · Tesseract</span>
  </div>
</header>
<main class="max-w-5xl mx-auto px-6 pt-16 pb-24">
  <section class="text-center mb-16 reveal" style="animation-delay:.1s">
    <h1 class="text-4xl sm:text-5xl font-display font-bold leading-tight text-ink-50 mb-4">
      Extract text from<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-ember-400 to-amber-300">PDFs &amp; Images</span>
    </h1>
    <p class="text-ink-200/70 max-w-lg mx-auto text-lg font-light">
      Upload a PDF or TIFF/PNG/JPG. A Lambda function with Tesseract OCR extracts every word.
    </p>
  </section>
  <section class="max-w-2xl mx-auto reveal" style="animation-delay:.25s">
    <form id="form" enctype="multipart/form-data" class="rounded-2xl border border-ink-800/70 bg-ink-900/60 backdrop-blur-sm shadow-2xl overflow-hidden">
      <div id="drop" class="relative flex flex-col items-center justify-center gap-4 p-12 border-b border-dashed border-ink-800/60 cursor-pointer transition-colors hover:bg-ink-800/20">
        <input type="file" id="fi" accept=".pdf,.tiff,.tif,.png,.jpg,.jpeg" class="hidden"/>
        <svg id="uicon" class="w-14 h-14 text-ink-200/30" fill="none" stroke="currentColor" stroke-width="1.4" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 16V4m0 0L8 8m4-4 4 4M4 17v1a2 2 0 002 2h12a2 2 0 002-2v-1"/></svg>
        <p id="dl" class="text-ink-200/60 text-center text-sm"><span class="text-ember-400 font-semibold">Click to browse</span> or drag &amp; drop<br><span class="text-xs text-ink-200/40">PDF · TIFF · PNG · JPG — max 20 MB</span></p>
        <div id="pill" class="hidden items-center gap-2 px-4 py-2 rounded-full bg-ink-800/80 border border-ink-800 text-sm">
          <svg class="w-4 h-4 text-jade-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg>
          <span id="fn" class="text-ink-100 truncate max-w-[220px]"></span>
          <button type="button" id="clr" class="ml-1 text-ink-200/40 hover:text-red-400">&times;</button>
        </div>
      </div>
      <div class="flex items-center justify-between px-6 py-4 bg-ink-900/80">
        <p id="status" class="text-xs text-ink-200/40 mono">Ready</p>
        <button type="submit" id="sbtn" disabled class="flex items-center gap-2 px-6 py-2.5 rounded-xl bg-gradient-to-r from-ember-500 to-ember-600 text-white font-semibold text-sm shadow-lg shadow-ember-500/20 disabled:opacity-30 disabled:cursor-not-allowed hover:brightness-110 transition-all">
          <span id="bl">Extract Text</span><div id="bs" class="spinner hidden"></div>
        </button>
      </div>
    </form>
  </section>
  <section id="res" class="max-w-2xl mx-auto mt-10 hidden reveal" style="animation-delay:.1s">
    <div class="rounded-2xl border border-ink-800/70 bg-ink-900/60 backdrop-blur-sm shadow-2xl overflow-hidden">
      <div class="flex flex-wrap items-center gap-6 px-6 py-4 border-b border-ink-800/50 text-xs mono">
        <div class="flex items-center gap-2"><span class="text-ink-200/50">TIME</span><span id="st" class="text-ember-400 font-semibold">—</span></div>
        <div class="flex items-center gap-2"><span class="text-ink-200/50">CHARS</span><span id="sc" class="text-jade-400 font-semibold">—</span></div>
        <div class="flex items-center gap-2"><span class="text-ink-200/50">PAGES</span><span id="sp" class="text-amber-300 font-semibold">—</span></div>
        <button id="cp" class="ml-auto flex items-center gap-1.5 px-3 py-1.5 rounded-lg border border-ink-800 hover:border-ember-500/50 text-ink-200/60 hover:text-ember-400 transition-colors">Copy</button>
      </div>
      <pre id="rtxt" class="px-6 py-5 text-sm leading-relaxed text-ink-100/80 whitespace-pre-wrap max-h-[420px] overflow-y-auto"></pre>
    </div>
  </section>
</main>
<script>
const $=id=>document.getElementById(id),drop=$('drop'),fi=$('fi'),pill=$('pill'),fn=$('fn'),
form=$('form'),sbtn=$('sbtn'),bl=$('bl'),bs=$('bs'),status=$('status'),res=$('res'),rtxt=$('rtxt'),
stt=$('st'),stc=$('sc'),stp=$('sp'),cp=$('cp'),ui=$('uicon'),dl=$('dl');
['dragenter','dragover'].forEach(e=>drop.addEventListener(e,ev=>{ev.preventDefault();drop.classList.add('drop-active')}));
['dragleave','drop'].forEach(e=>drop.addEventListener(e,ev=>{ev.preventDefault();drop.classList.remove('drop-active')}));
drop.addEventListener('drop',ev=>{fi.files=ev.dataTransfer.files;pick()});
drop.addEventListener('click',()=>fi.click());fi.addEventListener('change',pick);
$('clr').addEventListener('click',e=>{e.stopPropagation();reset()});
function pick(){const f=fi.files[0];if(!f)return reset();fn.textContent=f.name;pill.classList.remove('hidden');pill.classList.add('flex');ui.classList.add('hidden');dl.classList.add('hidden');sbtn.disabled=false;status.textContent=`${(f.size/1048576).toFixed(2)} MB`}
function reset(){fi.value='';pill.classList.add('hidden');pill.classList.remove('flex');ui.classList.remove('hidden');dl.classList.remove('hidden');sbtn.disabled=true;status.textContent='Ready'}
form.addEventListener('submit',async e=>{e.preventDefault();const f=fi.files[0];if(!f)return;
sbtn.disabled=true;bl.textContent='Processing…';bs.classList.remove('hidden');status.textContent='Uploading…';res.classList.add('hidden');
const fd=new FormData();fd.append('file',f);const t0=performance.now();
try{const r=await fetch('/api/extract',{method:'POST',body:fd});const d=await r.json();if(!r.ok)throw new Error(d.error||'Failed');
rtxt.textContent=d.text||'(no text)';stt.textContent=`${d.processing_time_ms??Math.round(performance.now()-t0)} ms`;
stc.textContent=(d.text?.length??0).toLocaleString();stp.textContent=d.pages??'—';res.classList.remove('hidden');status.textContent='Done ✓';
}catch(err){status.textContent=`Error: ${err.message}`}
finally{sbtn.disabled=false;bl.textContent='Extract Text';bs.classList.add('hidden')}});
cp.addEventListener('click',()=>{navigator.clipboard.writeText(rtxt.textContent).then(()=>{cp.textContent='Copied!';setTimeout(()=>cp.textContent='Copy',2000)})});
</script>
</body>
</html>
